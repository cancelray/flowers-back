"use strict";const customFormSubmit=async function(event){event.preventDefault();let values=customValidate(customForm);if("number"!=typeof values){showLoader();const inputToken=document.querySelector('input[name="token"]');let token=inputToken.value,response;if((await fetch("/sendmail",{headers:{"X-CSRF-TOKEN":token},method:"POST",body:values})).ok){removeLoader(),customForm.reset();const success="Ваша заявка принята";showPopup(success)}else{removeLoader();const fail="Произошла ошибка сервера. Попробуйте ещё раз";showPopup(fail)}}else{const validError="Проверьте правильность заполнения полей";showPopup(validError)}},customValidate=()=>{let value="",errors=0;const formInputs=document.querySelectorAll("._custom-input");for(let i=0;i<formInputs.length;i++){const input=formInputs[i];errorRemove(input),"name"===input.attributes.name.value?input.value.length<3||!nameValid(input)?(errorAdd(input),errors++):value+="Имя: "+input.value+" ":"phone"===input.attributes.name.value?phoneValid(input)?value+="Телефон: "+input.value+" ":(errorAdd(input),errors++):"custom-order"===input.attributes.name.value&&(""===input.value?(errorAdd(input),errors++):value+="Заказ: "+input.value)}return errors>0?errors:value},nameValid=input=>/^[a-zA-Zа-яА-Я'][a-zA-Zа-яА-Я-' ]+[a-zA-Zа-яА-Я']?$/.test(input.value),phoneValid=input=>/^(\+7|7|8)?[\s\-]?\(?[489][0-9]{2}\)?[\s\-]?[0-9]{3}[\s\-]?[0-9]{2}[\s\-]?[0-9]{2}$/.test(input.value),errorAdd=input=>{input.classList.add("error")},errorRemove=input=>{input.classList.remove("error")},showLoader=()=>{loader.classList.remove("loader-hide"),formContainer.classList.add("low-opacity")},removeLoader=()=>{loader.classList.add("loader-hide"),formContainer.classList.remove("low-opacity")},showPopup=text=>{popup.classList.add("show-popup");const popupText=document.querySelector(".popup-txt");popupText.innerText=text,formContainer.classList.add("low-opacity")},closePopup=()=>{popup.classList.remove("show-popup"),formContainer.classList.remove("low-opacity")},customForm=document.getElementById("custom-from");customForm.addEventListener("submit",customFormSubmit);const formContainer=document.getElementById("form-container"),loader=document.querySelector(".loader-custom-form"),popup=document.querySelector(".popup"),popupWrapper=document.querySelector(".popup-wrapper"),popupBtn=document.querySelector(".popup-btn");popupBtn.addEventListener("click",closePopup),window.onclick=click=>{click.target!==popupWrapper&&popup.classList.contains("show-popup")&&closePopup()};